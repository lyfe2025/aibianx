# AIå˜ç°ä¹‹è·¯ - æ”¯ä»˜ç³»ç»Ÿæ–¹æ¡ˆå¯¹æ¯”åˆ†ææŠ¥å‘Š

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
> **åˆ›å»ºæ—¶é—´**: 2025å¹´1æœˆ
> **æŠ€æœ¯æ ˆ**: Node.js + TypeScript + Strapi 5.x  
> **é€‚ç”¨åœºæ™¯**: ä¼ä¸šçº§æ”¯ä»˜ç³»ç»Ÿé›†æˆæ–¹æ¡ˆé€‰å‹

---

## ğŸ“‹ ç›®å½•

- [1. æ–¹æ¡ˆæ¦‚è§ˆ](#1-æ–¹æ¡ˆæ¦‚è§ˆ)
- [2. è‡ªä¸»å¼€å‘æ–¹æ¡ˆ](#2-è‡ªä¸»å¼€å‘æ–¹æ¡ˆ)
- [3. å¼€æºé¡¹ç›®æ–¹æ¡ˆ](#3-å¼€æºé¡¹ç›®æ–¹æ¡ˆ)
- [4. è¯¦ç»†å¯¹æ¯”è¡¨](#4-è¯¦ç»†å¯¹æ¯”è¡¨)
- [5. æŠ€æœ¯å®æ–½ç»†èŠ‚](#5-æŠ€æœ¯å®æ–½ç»†èŠ‚)
- [6. é£é™©è¯„ä¼°](#6-é£é™©è¯„ä¼°)
- [7. æœ€ç»ˆæ¨è](#7-æœ€ç»ˆæ¨è)

---

## 1. æ–¹æ¡ˆæ¦‚è§ˆ

### 1.1 èƒŒæ™¯éœ€æ±‚

AIå˜ç°ä¹‹è·¯é¡¹ç›®éœ€è¦é›†æˆæ”¯ä»˜åŠŸèƒ½ï¼Œæ”¯æŒï¼š
- âœ… æ”¯ä»˜å®æ”¯ä»˜ï¼ˆç½‘é¡µã€æ‰‹æœºã€æ‰«ç ï¼‰
- âœ… å¾®ä¿¡æ”¯ä»˜ï¼ˆå…¬ä¼—å·ã€å°ç¨‹åºã€æ‰«ç ï¼‰
- âœ… Stripeæ”¯ä»˜ï¼ˆå›½é™…ä¿¡ç”¨å¡ï¼‰
- âœ… è®¢å•ç®¡ç†ã€é€€æ¬¾å¤„ç†ã€å¯¹è´¦åŠŸèƒ½
- âœ… ä¼šå‘˜è®¢é˜…ã€ä½£é‡‘åˆ†æˆç­‰ä¸šåŠ¡åœºæ™¯

### 1.2 æŠ€æœ¯çº¦æŸ

- **åç«¯**: Strapi 5.x + PostgreSQL + TypeScript
- **å‰ç«¯**: Next.js 14 + React 19 + TypeScript
- **éƒ¨ç½²**: Docker + äº‘æœåŠ¡å™¨
- **å®‰å…¨**: ä¼ä¸šçº§å®‰å…¨è¦æ±‚ï¼Œæ”¯æŒç”Ÿäº§ç¯å¢ƒ

---

## 2. è‡ªä¸»å¼€å‘æ–¹æ¡ˆ

### 2.1 å®˜æ–¹SDKç›´æ¥é›†æˆ

#### æŠ€æœ¯æ–¹æ¡ˆ

```typescript
// æ”¯ä»˜å®å®˜æ–¹SDKé›†æˆ
import AlipaySdk from 'alipay-sdk';

export class AlipayService {
  private alipaySdk: AlipaySdk;

  constructor() {
    this.alipaySdk = new AlipaySdk({
      appId: process.env.ALIPAY_APP_ID,
      privateKey: process.env.ALIPAY_PRIVATE_KEY,
      alipayPublicKey: process.env.ALIPAY_PUBLIC_KEY,
      gateway: 'https://openapi.alipay.com/gateway.do'
    });
  }

  async createWebPayment(orderData: OrderData) {
    const formData = new AlipayFormData();
    formData.addField('bizContent', {
      outTradeNo: orderData.orderNo,
      productCode: 'FAST_INSTANT_TRADE_PAY',
      totalAmount: orderData.amount,
      subject: orderData.subject,
      body: orderData.description
    });

    return await this.alipaySdk.exec('alipay.trade.page.pay', {}, { formData });
  }
}

// å¾®ä¿¡æ”¯ä»˜å®˜æ–¹SDKé›†æˆ
import { Payment } from 'wechatpay-axios-plugin';

export class WechatPayService {
  private payment: Payment;

  constructor() {
    this.payment = new Payment({
      appid: process.env.WECHAT_APP_ID,
      mchid: process.env.WECHAT_MCH_ID,
      private_key: process.env.WECHAT_PRIVATE_KEY,
      certificate: process.env.WECHAT_CERTIFICATE
    });
  }

  async createJSAPIPayment(orderData: OrderData) {
    return await this.payment.transactions.jsapi({
      appid: process.env.WECHAT_APP_ID,
      mchid: process.env.WECHAT_MCH_ID,
      description: orderData.subject,
      out_trade_no: orderData.orderNo,
      amount: {
        total: orderData.amount * 100,
        currency: 'CNY'
      },
      payer: {
        openid: orderData.openid
      }
    });
  }
}
```

#### ä¼˜åŠ¿åˆ†æ

| ä¼˜åŠ¿é¡¹ | è¯´æ˜ |
|--------|------|
| âœ… **å®Œå…¨å¯æ§** | ä»£ç å®Œå…¨è‡ªä¸»ï¼Œæ— ç¬¬ä¸‰æ–¹ä¾èµ–é£é™© |
| âœ… **æ€§èƒ½æœ€ä¼˜** | ç›´æ¥è°ƒç”¨å®˜æ–¹APIï¼Œæ— ä¸­é—´å±‚å¼€é”€ |
| âœ… **åŠŸèƒ½æœ€å…¨** | æ”¯æŒæ‰€æœ‰å®˜æ–¹APIåŠŸèƒ½ |
| âœ… **å®‰å…¨æ€§é«˜** | ç›´æ¥ä¸å®˜æ–¹æœåŠ¡é€šä¿¡ï¼Œå®‰å…¨å¯æ§ |
| âœ… **å®šåˆ¶æ€§å¼º** | å¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚æ·±åº¦å®šåˆ¶ |
| âœ… **å­¦ä¹ ä»·å€¼** | å›¢é˜Ÿæ·±åº¦ç†è§£æ”¯ä»˜æµç¨‹ |

#### åŠ£åŠ¿åˆ†æ

| åŠ£åŠ¿é¡¹ | è¯´æ˜ |
|--------|------|
| âŒ **å¼€å‘å·¥ä½œé‡å¤§** | éœ€è¦å¯¹æ¥å¤šä¸ªæ”¯ä»˜å¹³å°çš„API |
| âŒ **ç»´æŠ¤æˆæœ¬é«˜** | éœ€è¦è·Ÿè¿›å„å¹³å°APIå˜æ›´ |
| âŒ **æŠ€æœ¯é—¨æ§›é«˜** | éœ€è¦æ·±å…¥ç†è§£å„æ”¯ä»˜å¹³å°è§„èŒƒ |
| âŒ **æµ‹è¯•å¤æ‚** | éœ€è¦æ­å»ºå¤šå¥—æµ‹è¯•ç¯å¢ƒ |
| âŒ **é£é™©æ§åˆ¶** | éœ€è¦è‡ªè¡Œå¤„ç†å„ç§å¼‚å¸¸æƒ…å†µ |

#### å¼€å‘æ—¶é—´è¯„ä¼°

- **æ”¯ä»˜å®é›†æˆ**: 5-7å¤©
- **å¾®ä¿¡æ”¯ä»˜é›†æˆ**: 5-7å¤©  
- **Stripeé›†æˆ**: 3-5å¤©
- **è®¢å•ç®¡ç†ç³»ç»Ÿ**: 7-10å¤©
- **é€€æ¬¾å¯¹è´¦åŠŸèƒ½**: 5-7å¤©
- **æµ‹è¯•å’Œä¼˜åŒ–**: 10-15å¤©
- **æ€»è®¡**: 35-50å¤©

---

## 3. å¼€æºé¡¹ç›®æ–¹æ¡ˆ

### 3.1 DaxPay - ä¼ä¸šçº§æ”¯ä»˜ç½‘å…³

#### é¡¹ç›®ä¿¡æ¯

- **GitHub**: [https://github.com/xxm1995/dax-pay](https://github.com/xxm1995/dax-pay)
- **Stars**: 227 â­
- **Forks**: 42 ğŸ´
- **Language**: Java + Vue3
- **License**: Apache-2.0
- **æœ€åæ›´æ–°**: 2024å¹´6æœˆ (æ´»è·ƒç»´æŠ¤)

#### æŠ€æœ¯ç‰¹ç‚¹

```java
// DaxPay APIè°ƒç”¨ç¤ºä¾‹
{
  "bizOrderNo": "ORDER20250101001",
  "title": "AIå˜ç°ä¹‹è·¯ä¼šå‘˜è®¢é˜…",
  "amount": 9900,
  "channel": "ali_pay",
  "notifyUrl": "https://api.aibianx.com/daxpay/callback",
  "returnUrl": "https://aibianx.com/payment/success"
}
```

#### åŠŸèƒ½çŸ©é˜µ

| åŠŸèƒ½æ¨¡å— | æ”¯æŒæƒ…å†µ | è¯´æ˜ |
|----------|----------|------|
| ğŸ’³ **æ”¯ä»˜æ–¹å¼** | âœ… å®Œæ•´ | æ”¯ä»˜å®ã€å¾®ä¿¡ã€äº‘é—ªä»˜ã€ç°é‡‘å¡ |
| ğŸ”„ **é€€æ¬¾åŠŸèƒ½** | âœ… å®Œæ•´ | å…¨é¢é€€æ¬¾ã€éƒ¨åˆ†é€€æ¬¾ã€æ‰¹é‡é€€æ¬¾ |
| ğŸ“Š **å¯¹è´¦åŠŸèƒ½** | âœ… å®Œæ•´ | è‡ªåŠ¨å¯¹è´¦ã€æ‰‹å·¥å¯¹è´¦ã€å·®é”™å¤„ç† |
| ğŸ’° **åˆ†è´¦åŠŸèƒ½** | âœ… å®Œæ•´ | å¤šå•†æˆ·åˆ†è´¦ã€ä½£é‡‘åˆ†æˆ |
| ğŸ¯ **æ”¶é“¶å°** | âœ… å®Œæ•´ | H5æ”¶é“¶å°ã€PCæ”¶é“¶å° |
| ğŸ“± **ç®¡ç†åå°** | âœ… å®Œæ•´ | Vue3å‰ç«¯ï¼ŒåŠŸèƒ½å®Œæ•´ |
| ğŸ”’ **å®‰å…¨è®¤è¯** | âœ… ä¼ä¸šçº§ | ç­¾åéªŒè¯ã€IPç™½åå• |
| ğŸ“ˆ **ç›‘æ§å‘Šè­¦** | âœ… æ”¯æŒ | æ”¯ä»˜ç›‘æ§ã€å¼‚å¸¸å‘Šè­¦ |

#### æ¶æ„ä¼˜åŠ¿

- âœ… **å¾®æœåŠ¡æ¶æ„**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•
- âœ… **HTTPè§£è€¦**: ä¸ä¸šåŠ¡ç³»ç»Ÿå®Œå…¨è§£è€¦
- âœ… **é«˜å¯ç”¨**: æ”¯æŒé›†ç¾¤éƒ¨ç½²
- âœ… **ä¸­æ–‡æ–‡æ¡£**: å®Œæ•´çš„ä¸­æ–‡æ–‡æ¡£å’Œç¤ºä¾‹

### 3.2 Payshift - ç»Ÿä¸€æ”¯ä»˜API

#### é¡¹ç›®ä¿¡æ¯

- **GitHub**: [https://github.com/Skyquakers/payshift](https://github.com/Skyquakers/payshift)
- **Stars**: 11 â­
- **Forks**: 2 ğŸ´
- **Language**: TypeScript
- **License**: æœªæ˜ç¡®
- **æœ€åæ›´æ–°**: 2024å¹´ (æ›´æ–°é¢‘ç‡ä½)

#### æŠ€æœ¯å®ç°

```typescript
// Payshifté›†æˆç¤ºä¾‹
import { Payshift, AlipayProvider, WechatPayProvider, StripeProvider } from "payshift";

const alipay = new AlipayProvider({
  appId: process.env.ALIPAY_APP_ID,
  privateKey: fs.readFileSync(privateKeyPath),
  alipayPublicKey: fs.readFileSync(alipayPublicKeyPath)
});

const payshift = new Payshift([alipay, wechat, stripe]);

// ç»Ÿä¸€æ”¯ä»˜æ¥å£
const res = await payshift.createCharge({
  outTradeNo: 'ORDER20250101001',
  title: 'AIå˜ç°ä¹‹è·¯ä¼šå‘˜',
  amount: 9900,
  channel: 'alipay_mobile_web',
  currency: 'CNY'
});
```

#### é£é™©è¯„ä¼°

| é£é™©é¡¹ | çº§åˆ« | è¯´æ˜ |
|--------|------|------|
| ğŸ”´ **ç¤¾åŒºé£é™©** | é«˜ | ä»…11ä¸ªstarï¼Œç¤¾åŒºæå° |
| ğŸ”´ **ç»´æŠ¤é£é™©** | é«˜ | ç»´æŠ¤è€…å¯èƒ½åœæ­¢ç»´æŠ¤ |
| ğŸŸ¡ **æ–‡æ¡£é£é™©** | ä¸­ | æ–‡æ¡£è¾ƒç®€å•ï¼Œç¼ºä¹æ·±åº¦ |
| ğŸŸ¡ **åŠŸèƒ½é£é™©** | ä¸­ | ä¼ä¸šçº§åŠŸèƒ½æ”¯æŒä¸æ˜ |

### 3.3 yzhanPay - èšåˆæ”¯ä»˜ç³»ç»Ÿ

#### é¡¹ç›®ä¿¡æ¯

- **GitHub**: [https://github.com/mantoufan/yzhanPay](https://github.com/mantoufan/yzhanPay)
- **Stars**: 234 â­
- **Forks**: 4 ğŸ´
- **Language**: PHP + JavaScript
- **License**: å•†ä¸šé™åˆ¶
- **ç‰¹ç‚¹**: å¤šè¯­è¨€ã€æ’ä»¶æ‰©å±•ã€è®¢é˜…æ”¯ä»˜

#### æŠ€æœ¯æ¶æ„

```php
// yzhanPayæ’ä»¶æ¶æ„
abstract class MyPaymentPlugin {
  abstract public function checkout($channel_id, $params);
  abstract public function sync($channel_id);
  abstract public function async($channel_id);
  abstract public function subscribe($channel_id, $params);
  abstract public function charge($channel_id, $params);
}
```

#### é€‚ç”¨æ€§åˆ†æ

| è¯„ä¼°é¡¹ | ç»“æœ | è¯´æ˜ |
|--------|------|------|
| ğŸ”´ **æŠ€æœ¯æ ˆä¸åŒ¹é…** | ä¸é€‚ç”¨ | PHPæŠ€æœ¯æ ˆï¼Œä¸æˆ‘ä»¬Node.jsä¸åŒ¹é… |
| ğŸŸ¡ **è®¸å¯è¯é™åˆ¶** | æœ‰é£é™© | å•†ä¸šä½¿ç”¨æœ‰é™åˆ¶ |
| âœ… **åŠŸèƒ½å®Œæ•´** | ä¼˜ç§€ | æ”¯æŒè®¢é˜…æ”¯ä»˜ã€å¤šè¯­è¨€ |

### 3.4 Medusa.jsæ”¯ä»˜æ’ä»¶ç”Ÿæ€

#### ä»£è¡¨æ€§æ’ä»¶

1. **medusa-payment-razorpay**
   - **GitHub**: [https://github.com/SGFGOV/medusa-payment-razorpay](https://github.com/SGFGOV/medusa-payment-razorpay)
   - **Stars**: 24 â­, **Forks**: 22 ğŸ´
   - **ç‰¹ç‚¹**: å°åº¦Razorpayæ”¯ä»˜ï¼Œæ¶æ„æ¸…æ™°

2. **medusa-payment-mercadopago**
   - **GitHub**: [https://github.com/minskylab/medusa-payment-mercadopago](https://github.com/minskylab/medusa-payment-mercadopago)
   - **Stars**: 43 â­, **Forks**: 10 ğŸ´
   - **ç‰¹ç‚¹**: æ‹‰ç¾MercadoPagoæ”¯ä»˜

3. **medusa-payment-paytm**
   - **GitHub**: [https://github.com/saurabh73/medusa-payment-paytm](https://github.com/saurabh73/medusa-payment-paytm)
   - **Stars**: 4 â­, **Forks**: 3 ğŸ´
   - **ç‰¹ç‚¹**: å°åº¦Paytmæ”¯ä»˜

#### æ¶æ„å€Ÿé‰´ä»·å€¼

```typescript
// Medusaæ”¯ä»˜æ’ä»¶æ ‡å‡†æ¶æ„
export interface PaymentProvider {
  identifier: string;
  
  // åˆ›å»ºæ”¯ä»˜ä¼šè¯
  createPayment(data: CreatePaymentData): Promise<PaymentSessionData>;
  
  // æ›´æ–°æ”¯ä»˜æ•°æ®
  updatePayment(data: UpdatePaymentData): Promise<PaymentSessionData>;
  
  // åˆ é™¤æ”¯ä»˜ä¼šè¯
  deletePayment(paymentSession: PaymentSession): Promise<void>;
  
  // è·å–æ”¯ä»˜çŠ¶æ€
  getStatus(data: PaymentSessionData): Promise<PaymentSessionStatus>;
  
  // æˆæƒæ”¯ä»˜
  authorizePayment(paymentSession: PaymentSession): Promise<PaymentSessionData>;
  
  // å–æ¶ˆæ”¯ä»˜
  cancelPayment(payment: Payment): Promise<Payment>;
  
  // è·å–æ”¯ä»˜æ•°æ®
  retrievePayment(data: PaymentSessionData): Promise<PaymentSessionData>;
  
  // å¤„ç†webhook
  handleWebhook(data: any): Promise<void>;
}
```

### 3.5 å…¶ä»–å¼€æºæ–¹æ¡ˆ

#### OpenPay - å¾®ä¿¡ç‹¬ç«‹æ”¶é“¶å°

- **GitHub**: [https://github.com/tans/OpenPay](https://github.com/tans/OpenPay)
- **Stars**: 14 â­, **Forks**: 1 ğŸ´
- **ç‰¹ç‚¹**: ä»…æ”¯æŒå¾®ä¿¡æ”¯ä»˜ï¼ŒåŠŸèƒ½æœ‰é™

#### PassToPay - å…¨çƒæ”¯ä»˜

- **GitHub**: [https://github.com/Pass2Pay/PassToPay](https://github.com/Pass2Pay/PassToPay)
- **Stars**: 5 â­, **Forks**: 2 ğŸ´
- **ç‰¹ç‚¹**: è·¨å¢ƒæ”¯ä»˜ï¼Œä½†ç¤¾åŒºå¾ˆå°

---

## 4. è¯¦ç»†å¯¹æ¯”è¡¨

### 4.1 ç»¼åˆè¯„åˆ†å¯¹æ¯”

| æ–¹æ¡ˆ | æŠ€æœ¯åŒ¹é… | ç¤¾åŒºæ´»è·ƒ | åŠŸèƒ½å®Œæ•´ | æ–‡æ¡£è´¨é‡ | ç»´æŠ¤æˆæœ¬ | å®‰å…¨æ€§ | **æ€»åˆ†** |
|------|----------|----------|----------|----------|----------|--------|----------|
| **è‡ªä¸»å¼€å‘** | 10/10 | N/A | 10/10 | 8/10 | 6/10 | 10/10 | **44/50** |
| **DaxPay** | 7/10 | 9/10 | 10/10 | 9/10 | 8/10 | 9/10 | **52/60** |
| **Payshift** | 10/10 | 3/10 | 7/10 | 5/10 | 4/10 | 6/10 | **35/60** |
| **yzhanPay** | 4/10 | 8/10 | 9/10 | 8/10 | 6/10 | 8/10 | **43/60** |
| **Medusaæ¶æ„** | 10/10 | 7/10 | 6/10 | 7/10 | 7/10 | 7/10 | **44/60** |

### 4.2 å¼€å‘æˆæœ¬å¯¹æ¯”

| æ–¹æ¡ˆ | åˆæœŸå¼€å‘ | é›†æˆéš¾åº¦ | æµ‹è¯•å·¥ä½œ | ç»´æŠ¤æˆæœ¬ | äººåŠ›éœ€æ±‚ |
|------|----------|----------|----------|----------|----------|
| **è‡ªä¸»å¼€å‘** | 35-50å¤© | é«˜ | å¤§ | é«˜ | 2-3äºº |
| **DaxPay** | 7-10å¤© | ä¸­ | ä¸­ | ä¸­ | 1-2äºº |
| **Payshift** | 3-5å¤© | ä½ | å° | é«˜âš ï¸ | 1äºº |
| **yzhanPay** | ä¸é€‚ç”¨ | - | - | - | - |
| **Medusaæ¶æ„** | 15-20å¤© | ä¸­ | ä¸­ | ä¸­ | 1-2äºº |

### 4.3 æŠ€æœ¯é£é™©è¯„ä¼°

| é£é™©ç±»å‹ | è‡ªä¸»å¼€å‘ | DaxPay | Payshift | yzhanPay | Medusaæ¶æ„ |
|----------|----------|---------|-----------|----------|------------|
| **å¼€å‘é£é™©** | ğŸ”´ é«˜ | ğŸŸ¡ ä¸­ | ğŸŸ¢ ä½ | ğŸ”´ é«˜ | ğŸŸ¡ ä¸­ |
| **ç»´æŠ¤é£é™©** | ğŸŸ¡ ä¸­ | ğŸŸ¢ ä½ | ğŸ”´ é«˜ | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ |
| **å®‰å…¨é£é™©** | ğŸŸ¢ ä½ | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ | ğŸŸ¢ ä½ | ğŸŸ¢ ä½ |
| **æ‰©å±•é£é™©** | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ | ğŸ”´ é«˜ | ğŸ”´ é«˜ | ğŸŸ¡ ä¸­ |
| **ç¤¾åŒºé£é™©** | N/A | ğŸŸ¢ ä½ | ğŸ”´ é«˜ | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ |

---

## 5. æŠ€æœ¯å®æ–½ç»†èŠ‚

### 5.1 DaxPayé›†æˆæ–¹æ¡ˆï¼ˆæ¨èï¼‰

#### éƒ¨ç½²æ¶æ„

```mermaid
graph TB
    A[AIå˜ç°ä¹‹è·¯å‰ç«¯] --> B[Strapiåç«¯]
    B --> C[DaxPayé€‚é…å™¨]
    C --> D[DaxPayæœåŠ¡]
    D --> E[æ”¯ä»˜å®]
    D --> F[å¾®ä¿¡æ”¯ä»˜]
    D --> G[äº‘é—ªä»˜]
    
    H[DaxPayç®¡ç†åå°] --> D
    I[æ•°æ®åº“] --> B
    J[DaxPayæ•°æ®åº“] --> D
```

#### å®æ–½æ­¥éª¤

1. **DaxPayç¯å¢ƒæ­å»º**
   ```bash
   # 1. å…‹éš†é¡¹ç›®
   git clone https://github.com/xxm1995/dax-pay.git
   cd dax-pay
   
   # 2. é…ç½®æ•°æ®åº“
   cp application-example.yml application.yml
   # ç¼–è¾‘æ•°æ®åº“é…ç½®
   
   # 3. Dockeréƒ¨ç½²
   docker-compose up -d
   
   # 4. è®¿é—®ç®¡ç†åå°
   # http://localhost:9000
   ```

2. **Strapié€‚é…å™¨å¼€å‘**
   ```typescript
   // backend/src/services/daxpay-adapter.ts
   export class DaxPayAdapter {
     private readonly apiUrl = process.env.DAXPAY_API_URL;
     private readonly signSecret = process.env.DAXPAY_SIGN_SECRET;
     
     async createUnifiedOrder(orderData: CreateOrderDto) {
       const payload = {
         bizOrderNo: orderData.orderNo,
         title: orderData.productName,
         amount: orderData.amount * 100, // è½¬æ¢ä¸ºåˆ†
         channel: this.mapChannel(orderData.paymentMethod),
         notifyUrl: `${process.env.BACKEND_URL}/api/daxpay/callback`,
         returnUrl: `${process.env.FRONTEND_URL}/payment/success`,
         reqTime: Date.now(),
         clientIp: orderData.clientIp
       };
       
       // æ·»åŠ ç­¾å
       payload.sign = this.generateSign(payload);
       
       const response = await fetch(`${this.apiUrl}/unifiedorder/pay`, {
         method: 'POST',
         headers: {
           'Content-Type': 'application/json'
         },
         body: JSON.stringify(payload)
       });
       
       return await response.json();
     }
     
     private mapChannel(paymentMethod: string): string {
       const channelMap = {
         'alipay_web': 'ali_pay',
         'alipay_mobile': 'ali_wap',
         'wechat_jsapi': 'wechat_pay',
         'wechat_h5': 'wechat_h5',
         'unionpay': 'union_pay'
       };
       return channelMap[paymentMethod] || 'ali_pay';
     }
     
     private generateSign(data: any): string {
       // DaxPayç­¾åç®—æ³•å®ç°
       const sortedKeys = Object.keys(data).sort();
       const signString = sortedKeys
         .map(key => `${key}=${data[key]}`)
         .join('&') + `&key=${this.signSecret}`;
       
       return crypto.createHash('md5').update(signString).digest('hex').toUpperCase();
     }
   }
   ```

3. **å‰ç«¯æ”¯ä»˜ç»„ä»¶**
   ```tsx
   // frontend/src/components/molecules/DaxPayCheckout.tsx
   export const DaxPayCheckout: React.FC<DaxPayCheckoutProps> = ({
     orderData,
     onSuccess,
     onError
   }) => {
     const [paymentUrl, setPaymentUrl] = useState<string>('');
     const [isLoading, setIsLoading] = useState(false);
     
     const handlePayment = async (paymentMethod: string) => {
       setIsLoading(true);
       try {
         const response = await strapiApi.createPayment({
           ...orderData,
           paymentMethod
         });
         
         if (response.success) {
           // è·³è½¬åˆ°DaxPayæ”¶é“¶å°
           window.location.href = response.payUrl;
         }
       } catch (error) {
         onError(error);
       } finally {
         setIsLoading(false);
       }
     };
     
     return (
       <div className="daxpay-checkout">
         <div className="payment-methods">
           <button 
             onClick={() => handlePayment('alipay_web')}
             disabled={isLoading}
           >
             æ”¯ä»˜å®æ”¯ä»˜
           </button>
           <button 
             onClick={() => handlePayment('wechat_jsapi')}
             disabled={isLoading}
           >
             å¾®ä¿¡æ”¯ä»˜
           </button>
         </div>
       </div>
     );
   };
   ```

### 5.2 è‡ªä¸»å¼€å‘å®æ–½æ–¹æ¡ˆ

#### æ ¸å¿ƒæ¶æ„

```typescript
// æ”¯ä»˜æœåŠ¡æŠ½è±¡å±‚
interface PaymentProvider {
  name: string;
  createPayment(data: PaymentData): Promise<PaymentResult>;
  queryPayment(orderNo: string): Promise<PaymentStatus>;
  processRefund(paymentId: string, amount: number): Promise<RefundResult>;
  handleWebhook(data: any): Promise<WebhookResult>;
}

// æ”¯ä»˜ç®¡ç†å™¨
export class PaymentManager {
  private providers = new Map<string, PaymentProvider>();
  
  register(provider: PaymentProvider) {
    this.providers.set(provider.name, provider);
  }
  
  async pay(method: string, data: PaymentData) {
    const provider = this.providers.get(method);
    if (!provider) {
      throw new Error(`Payment provider ${method} not found`);
    }
    return await provider.createPayment(data);
  }
}
```

#### å„æ”¯ä»˜å¹³å°å®ç°

```typescript
// æ”¯ä»˜å®å®ç°
export class AlipayProvider implements PaymentProvider {
  name = 'alipay';
  private sdk: AlipaySdk;
  
  constructor(config: AlipayConfig) {
    this.sdk = new AlipaySdk({
      appId: config.appId,
      privateKey: config.privateKey,
      alipayPublicKey: config.alipayPublicKey
    });
  }
  
  async createPayment(data: PaymentData): Promise<PaymentResult> {
    const result = await this.sdk.pageExecute('alipay.trade.page.pay', {
      bizContent: {
        out_trade_no: data.orderNo,
        product_code: 'FAST_INSTANT_TRADE_PAY',
        total_amount: data.amount,
        subject: data.subject
      }
    });
    
    return {
      success: true,
      payUrl: result,
      orderNo: data.orderNo
    };
  }
}

// å¾®ä¿¡æ”¯ä»˜å®ç°
export class WechatPayProvider implements PaymentProvider {
  name = 'wechatpay';
  private payment: Payment;
  
  constructor(config: WechatConfig) {
    this.payment = new Payment({
      appid: config.appId,
      mchid: config.mchId,
      private_key: config.privateKey
    });
  }
  
  async createPayment(data: PaymentData): Promise<PaymentResult> {
    const result = await this.payment.transactions.jsapi({
      appid: this.config.appId,
      mchid: this.config.mchId,
      description: data.subject,
      out_trade_no: data.orderNo,
      amount: {
        total: data.amount * 100,
        currency: 'CNY'
      }
    });
    
    return {
      success: true,
      prepayId: result.prepay_id,
      orderNo: data.orderNo
    };
  }
}
```

---

## 6. é£é™©è¯„ä¼°

### 6.1 æŠ€æœ¯é£é™©

| é£é™©é¡¹ | è‡ªä¸»å¼€å‘ | DaxPay | Payshift | å½±å“ç¨‹åº¦ | åº”å¯¹ç­–ç•¥ |
|--------|----------|---------|-----------|----------|----------|
| **APIå˜æ›´** | ğŸ”´ é«˜ | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ | é«˜ | åŠæ—¶è·Ÿè¿›å®˜æ–¹æ›´æ–° |
| **å®‰å…¨æ¼æ´** | ğŸŸ¡ ä¸­ | ğŸŸ¢ ä½ | ğŸ”´ é«˜ | æé«˜ | å®šæœŸå®‰å…¨å®¡è®¡ |
| **æ€§èƒ½é—®é¢˜** | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ | ä¸­ | æ€§èƒ½ç›‘æ§ |
| **å…¼å®¹æ€§** | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ | ğŸ”´ é«˜ | ä¸­ | å……åˆ†æµ‹è¯• |

### 6.2 å•†ä¸šé£é™©

| é£é™©é¡¹ | è¯´æ˜ | å½±å“ç¨‹åº¦ | åº”å¯¹ç­–ç•¥ |
|--------|------|----------|----------|
| **åˆè§„é£é™©** | æ”¯ä»˜åˆè§„è¦æ±‚å˜åŒ– | é«˜ | æŒç»­å…³æ³¨æ”¿ç­–å˜åŒ– |
| **æˆæœ¬é£é™©** | å¼€å‘ç»´æŠ¤æˆæœ¬è¶…é¢„æœŸ | ä¸­ | åšå¥½æˆæœ¬é¢„ç®—å’Œæ§åˆ¶ |
| **æ—¶é—´é£é™©** | ä¸Šçº¿æ—¶é—´å»¶æœŸ | ä¸­ | åˆ†é˜¶æ®µå®æ–½ï¼ŒMVPä¼˜å…ˆ |
| **ä¾èµ–é£é™©** | ç¬¬ä¸‰æ–¹æœåŠ¡ä¸å¯ç”¨ | é«˜ | å¤šæ–¹æ¡ˆå¤‡é€‰ |

### 6.3 è¿ç»´é£é™©

| é£é™©é¡¹ | æè¿° | é¢„é˜²æªæ–½ |
|--------|------|----------|
| **æœåŠ¡æ•…éšœ** | æ”¯ä»˜æœåŠ¡ä¸å¯ç”¨ | å¤šæ´»éƒ¨ç½²ã€ç›‘æ§å‘Šè­¦ |
| **æ•°æ®ä¸¢å¤±** | æ”¯ä»˜æ•°æ®ä¸¢å¤± | å®æ—¶å¤‡ä»½ã€æ•°æ®æ ¡éªŒ |
| **å®‰å…¨æ”»å‡»** | æ¶æ„æ”»å‡»æ”¯ä»˜æ¥å£ | WAFé˜²æŠ¤ã€é™æµæ§åˆ¶ |
| **èµ„é‡‘å®‰å…¨** | èµ„é‡‘æµæ°´å¼‚å¸¸ | å®æ—¶å¯¹è´¦ã€å¼‚å¸¸å‘Šè­¦ |

---

## 7. æœ€ç»ˆæ¨è

### 7.1 æ¨èæ–¹æ¡ˆï¼šDaxPay + é€‚é…å™¨æ¨¡å¼

#### é€‰æ‹©ç†ç”±

1. **é£é™©æœ€ä½** ğŸŸ¢
   - ç¤¾åŒºæˆç†Ÿåº¦é«˜ï¼ŒæŒç»­ç»´æŠ¤
   - ä¼ä¸šçº§åŠŸèƒ½å®Œæ•´
   - ç”Ÿäº§ç¯å¢ƒéªŒè¯

2. **å®æ–½æ•ˆç‡é«˜** âš¡
   - å¼€å‘å‘¨æœŸçŸ­ï¼ˆ7-10å¤©ï¼‰
   - é›†æˆéš¾åº¦é€‚ä¸­
   - æŠ€æœ¯æ ˆé€‚é…è‰¯å¥½

3. **é•¿æœŸæ”¶ç›Šå¥½** ğŸ“ˆ
   - åŠŸèƒ½å®Œæ•´ï¼Œæ»¡è¶³é•¿æœŸéœ€æ±‚
   - ä¸­æ–‡æ”¯æŒï¼Œç»´æŠ¤æˆæœ¬ä½
   - æ¶æ„æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•

#### å®æ–½è®¡åˆ’

| é˜¶æ®µ | æ—¶é—´ | å·¥ä½œå†…å®¹ | äº¤ä»˜ç‰© |
|------|------|----------|--------|
| **Phase 1** | 2å¤© | DaxPayç¯å¢ƒæ­å»º | æµ‹è¯•ç¯å¢ƒå°±ç»ª |
| **Phase 2** | 3å¤© | Strapié€‚é…å™¨å¼€å‘ | æ”¯ä»˜APIæ¥å£ |
| **Phase 3** | 2å¤© | å‰ç«¯ç»„ä»¶é›†æˆ | æ”¯ä»˜ç•Œé¢å®Œæˆ |
| **Phase 4** | 3å¤© | æµ‹è¯•å’Œä¼˜åŒ– | åŠŸèƒ½éªŒè¯é€šè¿‡ |
| **æ€»è®¡** | 10å¤© | å®Œæ•´æ”¯ä»˜ç³»ç»Ÿ | ç”Ÿäº§å¯ç”¨ |

### 7.2 å¤‡é€‰æ–¹æ¡ˆï¼šè‡ªä¸»å¼€å‘ï¼ˆé•¿æœŸè€ƒè™‘ï¼‰

#### é€‚ç”¨åœºæ™¯

- å›¢é˜ŸæŠ€æœ¯å®åŠ›å¼º
- æœ‰å……è¶³å¼€å‘æ—¶é—´
- éœ€è¦æ·±åº¦å®šåˆ¶åŠŸèƒ½
- å¸Œæœ›å®Œå…¨è‡ªä¸»å¯æ§

#### åˆ†é˜¶æ®µå®æ–½

1. **ç¬¬ä¸€é˜¶æ®µ**ï¼šä½¿ç”¨DaxPayå¿«é€Ÿä¸Šçº¿
2. **ç¬¬äºŒé˜¶æ®µ**ï¼šå¹¶è¡Œå¼€å‘è‡ªä¸»æ”¯ä»˜ç³»ç»Ÿ
3. **ç¬¬ä¸‰é˜¶æ®µ**ï¼šé€æ­¥è¿ç§»åˆ°è‡ªä¸»ç³»ç»Ÿ

### 7.3 ä¸æ¨èæ–¹æ¡ˆ

#### Payshift - é£é™©è¿‡é«˜

- âŒ ç¤¾åŒºè¿‡å°ï¼ˆä»…11ä¸ªstarï¼‰
- âŒ ç»´æŠ¤é£é™©æé«˜
- âŒ ç”Ÿäº§ç¯å¢ƒæœªéªŒè¯
- âŒ ä¼ä¸šçº§åŠŸèƒ½ä¸æ˜

#### yzhanPay - æŠ€æœ¯æ ˆä¸åŒ¹é…

- âŒ PHPæŠ€æœ¯æ ˆä¸é¡¹ç›®ä¸ç¬¦
- âŒ è¿ç§»æˆæœ¬è¿‡é«˜
- âŒ å›¢é˜Ÿå­¦ä¹ æˆæœ¬å¤§

---

## 8. æ€»ç»“

### 8.1 æ ¸å¿ƒå»ºè®®

1. **é¦–é€‰DaxPayæ–¹æ¡ˆ**ï¼Œå¿«é€Ÿå®ç°æ”¯ä»˜åŠŸèƒ½ä¸Šçº¿
2. **ä¸­æœŸè€ƒè™‘è‡ªä¸»å¼€å‘**ï¼Œå¢å¼ºç³»ç»Ÿè‡ªä¸»å¯æ§æ€§
3. **é¿å…å°ä¼—å¼€æºé¡¹ç›®**ï¼Œé™ä½æŠ€æœ¯é£é™©

### 8.2 å…³é”®æˆåŠŸå› ç´ 

- âœ… **å®‰å…¨ç¬¬ä¸€**ï¼šç¡®ä¿æ”¯ä»˜å®‰å…¨å’Œèµ„é‡‘å®‰å…¨
- âœ… **ç¨³å®šä¼˜å…ˆ**ï¼šé€‰æ‹©æˆç†Ÿç¨³å®šçš„æŠ€æœ¯æ–¹æ¡ˆ
- âœ… **æ¸è¿›å®æ–½**ï¼šåˆ†é˜¶æ®µå®æ–½ï¼Œé™ä½é£é™©
- âœ… **å……åˆ†æµ‹è¯•**ï¼šç¡®ä¿å„ç§åœºæ™¯çš„åŠŸèƒ½éªŒè¯

### 8.3 ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **æŠ€æœ¯é¢„ç ”**ï¼šæ·±å…¥ç ”ç©¶DaxPayéƒ¨ç½²å’Œé›†æˆç»†èŠ‚
2. **ç¯å¢ƒæ­å»º**ï¼šæ­å»ºDaxPayæµ‹è¯•ç¯å¢ƒ
3. **åŸå‹å¼€å‘**ï¼šå¼€å‘æ”¯ä»˜åŠŸèƒ½åŸå‹
4. **æ–¹æ¡ˆç¡®è®¤**ï¼šå›¢é˜Ÿè¯„å®¡ç¡®è®¤æœ€ç»ˆæŠ€æœ¯æ–¹æ¡ˆ

---

**æ–‡æ¡£ç»´æŠ¤**ï¼šæœ¬æ–‡æ¡£å°†æ ¹æ®æŠ€æœ¯é€‰å‹ç»“æœå’Œå®æ–½è¿‡ç¨‹æŒç»­æ›´æ–°

**è”ç³»æ–¹å¼**ï¼šå¦‚æœ‰æŠ€æœ¯é—®é¢˜ï¼Œè¯·é€šè¿‡é¡¹ç›®Issueæˆ–å›¢é˜Ÿç¾¤ç»„è®¨è®º