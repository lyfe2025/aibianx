# AI变现之路 - 生产环境部署指南 🚀

> 🏗️ **部署手册**：从开发环境到生产环境的完整部署方案

## 📚 文档说明

本文档是 **[技术方案总览指南](./AI变现之路_技术方案总览指南.md)** 的配套部署文档，提供生产环境的部署架构和运维策略。

---

## 🏗️ 生产环境架构设计

### 🎯 **推荐部署架构**
```
                    用户请求
                       ↓
                   Cloudflare CDN
                       ↓
                   Vercel (前端)
                       ↓
              Railway/Heroku (Strapi)
                       ↓
               Supabase (PostgreSQL)
                       ↓
           阿里云OSS/AWS S3 (文件存储)
```

### 📊 **服务选型对比**

| 服务类型 | **推荐方案** | **备选方案** | **选择理由** |
|---------|-------------|-------------|-------------|
| **前端托管** | Vercel | Netlify | Next.js原生支持，ISR完美 |
| **后端服务** | Railway | Heroku/DigitalOcean | 性价比高，PostgreSQL集成 |
| **数据库** | Supabase | AWS RDS | 免费额度大，管理界面友好 |
| **文件存储** | 阿里云OSS | AWS S3 | 国内访问速度快 |
| **CDN加速** | Cloudflare | 阿里云CDN | 全球节点，免费额度 |
| **监控告警** | Sentry | LogRocket | 错误跟踪，性能监控 |

---

## 📅 第1阶段：基础环境搭建

### ⚡ **Day 1：数据库部署（Supabase）**

#### **第1步：Supabase项目创建**
```bash
# 1. 访问 https://supabase.com
# 2. 创建新项目
项目名称：aibianx-prod
数据库密码：<生成强密码>
地区选择：Singapore (最接近中国)

# 3. 等待项目初始化完成（约2-3分钟）
```

#### **第2步：数据库配置**
```sql
-- 1. 启用必要的扩展
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pgcrypto";

-- 2. 创建应用用户（可选，使用默认用户）
-- Supabase自动管理用户权限

-- 3. 记录连接信息
数据库URL：postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres
直连URL：postgresql://postgres:[password]@db.[project-ref].supabase.co:6543/postgres
```

#### **第3步：安全配置**
```bash
# 1. Settings → Database → Connection pooling
启用连接池：✅
最大连接数：20

# 2. Settings → API → API Settings
Row Level Security (RLS)：启用
JWT Secret：记录备用
```

### ⚡ **Day 2：后端部署（Railway）**

#### **第1步：Railway项目创建**
```bash
# 1. 访问 https://railway.app
# 2. 连接GitHub账号
# 3. 创建新项目
选择方式：Deploy from GitHub repo
仓库：aibianx/backend
分支：main

# 4. 项目配置
项目名称：aibianx-backend
环境：Production
```

#### **第2步：环境变量配置**
```bash
# Railway项目 → Variables 标签

DATABASE_URL=postgresql://postgres:[password]@db.[supabase-ref].supabase.co:5432/postgres
NODE_ENV=production
JWT_SECRET=your_jwt_secret_here
ADMIN_JWT_SECRET=your_admin_jwt_secret_here

# Strapi配置
HOST=0.0.0.0
PORT=3000
APP_KEYS=your_app_keys_here

# 文件上传配置（阿里云OSS）
OSS_ACCESS_KEY_ID=your_oss_access_key
OSS_ACCESS_KEY_SECRET=your_oss_secret_key
OSS_BUCKET=aibianx-assets
OSS_REGION=oss-cn-hangzhou
OSS_ENDPOINT=https://oss-cn-hangzhou.aliyuncs.com

# 邮件配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password
```

#### **第3步：Strapi OSS插件配置**
```javascript
// backend/config/plugins.js
module.exports = ({ env }) => ({
  // OSS上传插件
  upload: {
    config: {
      provider: 'strapi-provider-upload-oss',
      providerOptions: {
        accessKeyId: env('OSS_ACCESS_KEY_ID'),
        accessKeySecret: env('OSS_ACCESS_KEY_SECRET'),
        region: env('OSS_REGION'),
        bucket: env('OSS_BUCKET'),
        endpoint: env('OSS_ENDPOINT'),
        timeout: 3600000,
        secure: true,
      },
    },
  },
  
  // SEO插件
  'seo': {
    enabled: true,
    config: {
      contentTypes: ['api::article.article', 'api::author.author'],
    },
  },
  
  // Sitemap插件
  'sitemap': {
    enabled: true,
    config: {
      autoGenerate: true,
      caching: true,
      allowedFields: ['id', 'title', 'slug', 'publishedAt'],
      contentTypes: {
        'api::article.article': {
          priority: 0.8,
          changefreq: 'weekly'
        }
      }
    }
  }
});
```

#### **第4步：自定义域名配置**
```bash
# 1. Railway项目 → Settings → Domains
# 2. 添加自定义域名
域名：api.aibianx.com
类型：Custom Domain

# 3. DNS配置（在域名服务商）
类型：CNAME
名称：api
值：your-project.railway.app
TTL：3600
```

#### **第5步：数据库迁移和注释配置**

⚠️ **重要提醒**：后端部署完成后，数据库虽然有基础表结构，但缺少中文注释。需要执行迁移脚本来添加完整的数据库注释，确保管理员能够正常使用Strapi后台。

```bash
# 1. 连接到生产数据库
# 使用Supabase提供的连接信息
DATABASE_URL="postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres"

# 2. 执行数据库迁移脚本
# 注意：这些脚本位于项目的backend/database/migrations/目录下

# 方法一：本地执行（推荐）
cd /path/to/your/project/backend
psql $DATABASE_URL -f database/migrations/add_missing_table_comments.sql
psql $DATABASE_URL -f database/migrations/add_link_table_comments.sql
psql $DATABASE_URL -f database/migrations/add_core_table_comments.sql
psql $DATABASE_URL -f database/migrations/add_user_table_comments.sql

# 方法二：通过Railway CLI执行
railway login
railway link [your-project-id]
railway run psql $DATABASE_URL -f database/migrations/add_missing_table_comments.sql
railway run psql $DATABASE_URL -f database/migrations/add_link_table_comments.sql
railway run psql $DATABASE_URL -f database/migrations/add_core_table_comments.sql
railway run psql $DATABASE_URL -f database/migrations/add_user_table_comments.sql

# 3. 验证迁移结果
psql $DATABASE_URL -c "
SELECT 
    table_name,
    CASE WHEN obj_description(c.oid) IS NOT NULL THEN '✅ 有注释' ELSE '❌ 缺少注释' END as status
FROM information_schema.tables t
LEFT JOIN pg_class c ON c.relname = t.table_name
WHERE t.table_schema = 'public' AND t.table_name IN ('articles', 'commissions', 'orders', 'payments')
ORDER BY t.table_name;
"
```

**执行后效果验证**：
- 登录Strapi管理界面：`https://api.aibianx.com/admin`
- 查看Content Manager中的内容类型
- 确认字段显示为中文描述（如："佣金比例"而不是"commission_rate"）
- 确认所有业务字段都有清晰的中文说明

**故障排除**：
- 如果连接数据库失败：检查DATABASE_URL和网络连接
- 如果SQL执行报错：确认表结构已由Strapi创建完成
- 如果注释未生效：重启Strapi服务使配置生效

### ⚡ **Day 3：前端部署（Vercel）**

#### **第1步：Vercel项目创建**
```bash
# 1. 访问 https://vercel.com
# 2. 连接GitHub账号
# 3. Import项目
选择仓库：aibianx/frontend
框架预设：Next.js
根目录：./
```

#### **第2步：环境变量配置**
```bash
# Vercel项目 → Settings → Environment Variables

# API配置
NEXT_PUBLIC_STRAPI_URL=https://api.aibianx.com
STRAPI_API_TOKEN=your_api_token_here

# SEO配置
NEXT_PUBLIC_SITE_URL=https://aibianx.com
NEXT_PUBLIC_SITE_NAME=AI变现之路

# 分析配置
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
NEXT_PUBLIC_BAIDU_ANALYTICS_ID=your_baidu_id

# 重新验证密钥
REVALIDATE_SECRET=your_revalidate_secret
```

#### **第3步：生产环境配置**
```typescript
// frontend/next.config.ts
/** @type {import('next').NextConfig} */
const nextConfig = {
  // 图片优化
  images: {
    domains: ['api.aibianx.com', 'aibianx-assets.oss-cn-hangzhou.aliyuncs.com'],
    formats: ['image/webp', 'image/avif'],
    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048],
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
  },
  
  // 输出配置
  output: 'standalone',
  compress: true,
  
  // 实验性功能
  experimental: {
    optimizeCss: true,
    optimizePackageImports: ['lucide-react'],
  },
  
  // 重定向配置
  async redirects() {
    return [
      {
        source: '/articles/:slug',
        destination: '/weekly/:slug',
        permanent: true,
      },
    ];
  },
  
  // 安全头部
  async headers() {
    return [
      {
        source: '/(.*)',
        headers: [
          {
            key: 'X-Frame-Options',
            value: 'DENY',
          },
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff',
          },
          {
            key: 'X-XSS-Protection',
            value: '1; mode=block',
          },
          {
            key: 'Referrer-Policy',
            value: 'origin-when-cross-origin',
          },
          {
            key: 'Strict-Transport-Security',
            value: 'max-age=31536000; includeSubDomains',
          },
        ],
      },
    ];
  },
};

module.exports = nextConfig;
```

#### **第4步：自定义域名配置**
```bash
# 1. Vercel项目 → Settings → Domains
# 2. 添加域名
主域名：aibianx.com
WWW域名：www.aibianx.com （重定向到主域名）

# 3. DNS配置
类型：A
名称：@
值：76.76.19.61 (Vercel的IP)

类型：CNAME  
名称：www
值：cname.vercel-dns.com
```

---

## 📅 第2阶段：文件存储和CDN

### ⚡ **阿里云OSS配置**

#### **第1步：OSS Bucket创建**
```bash
# 1. 登录阿里云控制台
# 2. 对象存储OSS → Bucket列表 → 创建Bucket

Bucket配置：
名称：aibianx-assets
地域：华东1（杭州）
存储类型：标准存储
访问权限：公共读
版本控制：关闭
```

#### **第2步：跨域配置**
```json
[
  {
    "allowedOrigin": [
      "https://aibianx.com",
      "https://www.aibianx.com",
      "https://api.aibianx.com"
    ],
    "allowedMethod": [
      "GET",
      "POST",
      "PUT",
      "DELETE"
    ],
    "allowedHeader": ["*"],
    "maxAgeSeconds": 3600
  }
]
```

#### **第3步：CDN加速配置**
```bash
# 1. CDN → 域名管理 → 添加域名
加速域名：assets.aibianx.com
业务类型：图片小文件
源站类型：OSS域名
源站域名：aibianx-assets.oss-cn-hangzhou.aliyuncs.com

# 2. 缓存配置
图片文件(.jpg,.png,.gif,.webp)：缓存7天
CSS/JS文件(.css,.js)：缓存30天
字体文件(.woff,.woff2,.ttf)：缓存30天
```

### ⚡ **Cloudflare全站加速**

#### **第1步：域名托管**
```bash
# 1. 访问 https://cloudflare.com
# 2. 添加站点：aibianx.com
# 3. 选择计划：Free（免费计划）
# 4. 更新域名DNS服务器到Cloudflare提供的NS
```

#### **第2步：缓存和性能优化**
```bash
# Speed → Optimization
Auto Minify：启用 HTML, CSS, JS
Brotli压缩：启用
Rocket Loader：启用

# Caching → Configuration  
缓存级别：Standard
浏览器缓存TTL：4 hours
Always Online：启用
```

#### **第3步：安全配置**
```bash
# Security → Settings
Security Level：Medium
Bot Fight Mode：启用
Challenge Passage：30分钟

# SSL/TLS → Overview
SSL/TLS加密模式：Full (strict)
Always Use HTTPS：启用
```

---

## 📅 第3阶段：监控和运维

### ⚡ **应用监控（Sentry）**

#### **第1步：Sentry项目创建**
```bash
# 1. 访问 https://sentry.io
# 2. 创建组织：aibianx
# 3. 创建项目
前端项目：aibianx-frontend (React)
后端项目：aibianx-backend (Node.js)
```

#### **第2步：前端集成**
```typescript
// frontend/src/lib/sentry.ts
import * as Sentry from '@sentry/nextjs';

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 0.1,
  debug: false,
  
  beforeSend(event) {
    // 过滤敏感信息
    if (event.exception) {
      const error = event.exception.values?.[0];
      if (error?.value?.includes('password')) {
        return null;
      }
    }
    return event;
  },
});

// frontend/next.config.js
const { withSentryConfig } = require('@sentry/nextjs');

module.exports = withSentryConfig(nextConfig, {
  silent: true,
  org: 'aibianx',
  project: 'aibianx-frontend',
});
```

#### **第3步：后端集成**
```javascript
// backend/config/plugins.js
module.exports = {
  'sentry': {
    enabled: true,
    config: {
      dsn: process.env.SENTRY_DSN,
      environment: process.env.NODE_ENV,
      tracesSampleRate: 0.1,
    },
  },
};
```

### ⚡ **性能监控（Google Analytics）**

#### **第1步：GA4配置**
```bash
# 1. 访问 https://analytics.google.com
# 2. 创建账户：AI变现之路
# 3. 创建媒体资源
网站名称：AI变现之路
网站URL：https://aibianx.com
行业类别：技术
报告时区：中国标准时间
```

#### **第2步：前端集成**
```typescript
// frontend/src/lib/analytics.ts
import { GoogleAnalytics } from '@next/third-parties/google';

// 页面浏览事件
export const trackPageView = (url: string) => {
  if (typeof window !== 'undefined' && window.gtag) {
    window.gtag('config', process.env.NEXT_PUBLIC_GA_ID!, {
      page_location: url,
    });
  }
};

// 自定义事件
export const trackEvent = (eventName: string, parameters: any) => {
  if (typeof window !== 'undefined' && window.gtag) {
    window.gtag('event', eventName, parameters);
  }
};

// 使用组件
// frontend/src/app/layout.tsx
export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html>
      <body>
        {children}
        <GoogleAnalytics gaId={process.env.NEXT_PUBLIC_GA_ID!} />
      </body>
    </html>
  );
}
```

### ⚡ **日志管理**

#### **第1步：结构化日志**
```javascript
// backend/config/logger.js
const winston = require('winston');

const logger = winston.createLogger({
  level: process.env.NODE_ENV === 'production' ? 'info' : 'debug',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.errors({ stack: true }),
    winston.format.json()
  ),
  defaultMeta: { service: 'aibianx-backend' },
  transports: [
    new winston.transports.Console({
      format: winston.format.combine(
        winston.format.colorize(),
        winston.format.simple()
      )
    })
  ],
});

module.exports = logger;
```

#### **第2步：API日志中间件**
```javascript
// backend/src/middlewares/logger.js
const logger = require('../config/logger');

module.exports = (strapi) => {
  return async (ctx, next) => {
    const start = Date.now();
    
    logger.info('Request started', {
      method: ctx.method,
      url: ctx.url,
      userAgent: ctx.get('User-Agent'),
      ip: ctx.ip,
    });
    
    try {
      await next();
      
      const duration = Date.now() - start;
      logger.info('Request completed', {
        method: ctx.method,
        url: ctx.url,
        status: ctx.status,
        duration,
      });
    } catch (error) {
      const duration = Date.now() - start;
      logger.error('Request failed', {
        method: ctx.method,
        url: ctx.url,
        status: ctx.status,
        duration,
        error: error.message,
        stack: error.stack,
      });
      throw error;
    }
  };
};
```

---

## 📅 第4阶段：备份和安全

### ⚡ **数据备份策略**

#### **第1步：Supabase自动备份**
```bash
# Supabase Dashboard → Settings → Database → Backups
每日备份：启用
保留时间：30天
时间：每天凌晨2点（中国时间）
```

#### **第2步：手动备份脚本**
```bash
#!/bin/bash
# scripts/backup-database.sh

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="backup_${DATE}.sql"

# 导出数据库
pg_dump $DATABASE_URL > $BACKUP_FILE

# 上传到阿里云OSS
ossutil cp $BACKUP_FILE oss://aibianx-backups/database/

# 清理本地文件
rm $BACKUP_FILE

echo "Backup completed: $BACKUP_FILE"
```

#### **第3步：定期备份任务**
```bash
# 使用GitHub Actions定期备份
# .github/workflows/backup.yml
name: Database Backup

on:
  schedule:
    - cron: '0 18 * * *'  # 每天凌晨2点（UTC+8）

jobs:
  backup:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Backup Database
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
        run: |
          sudo apt-get install postgresql-client
          ./scripts/backup-database.sh
```

### ⚡ **安全配置**

#### **第1步：Strapi安全设置**
```javascript
// backend/config/middlewares.js
module.exports = [
  'strapi::errors',
  {
    name: 'strapi::security',
    config: {
      contentSecurityPolicy: {
        useDefaults: true,
        directives: {
          'connect-src': ["'self'", 'https:'],
          'img-src': [
            "'self'",
            'data:',
            'blob:',
            'https://aibianx-assets.oss-cn-hangzhou.aliyuncs.com',
          ],
          'media-src': ["'self'", 'data:', 'blob:'],
          upgradeInsecureRequests: null,
        },
      },
    },
  },
  {
    name: 'strapi::cors',
    config: {
      enabled: true,
      headers: '*',
      origin: [
        'https://aibianx.com',
        'https://www.aibianx.com',
        'http://localhost:3000', // 开发环境
      ],
    },
  },
  'strapi::poweredBy',
  'strapi::logger',
  'strapi::query',
  'strapi::body',
  'strapi::session',
  'strapi::favicon',
  'strapi::public',
];
```

#### **第2步：环境变量安全**
```bash
# 使用强密码生成器
JWT_SECRET=$(openssl rand -base64 32)
ADMIN_JWT_SECRET=$(openssl rand -base64 32)
APP_KEYS=$(openssl rand -base64 32),$(openssl rand -base64 32)

# 定期轮换密钥（每3个月）
# 在生产环境中设置提醒任务
```

#### **第3步：API限流配置**
```javascript
// backend/config/middlewares.js
module.exports = [
  // ... 其他中间件
  {
    name: 'strapi::rate-limit',
    config: {
      max: 100, // 每个窗口最大请求数
      duration: 60000, // 窗口时间（毫秒）
      enableDraftAndPublish: true,
    },
  },
];
```

---

## 📅 第5阶段：域名和SSL

### ⚡ **域名配置**

#### **第1步：DNS完整配置**
```bash
# 主域名记录
类型：A
名称：@  
值：76.76.19.61 (Vercel IP)
TTL：3600

# WWW子域名
类型：CNAME
名称：www
值：cname.vercel-dns.com
TTL：3600

# API子域名
类型：CNAME  
名称：api
值：your-project.railway.app
TTL：3600

# 资源子域名
类型：CNAME
名称：assets
值：aibianx-assets.oss-cn-hangzhou.aliyuncs.com
TTL：3600

# 邮件记录（可选）
类型：MX
名称：@
值：10 mx1.your-email-provider.com
TTL：3600
```

#### **第2步：SSL证书配置**
```bash
# Cloudflare自动管理SSL证书
# 1. SSL/TLS → Origin Server
# 2. Create Certificate
证书类型：Let Encrypt
域名：*.aibianx.com, aibianx.com
有效期：15年

# 3. 在Railway/Vercel中配置Origin证书
```

### ⚡ **SEO域名优化**

#### **第1步：重定向配置**
```javascript
// frontend/next.config.js
async redirects() {
  return [
    // WWW重定向到主域名
    {
      source: '/:path*',
      destination: 'https://aibianx.com/:path*',
      permanent: true,
      has: [
        {
          type: 'host',
          value: 'www.aibianx.com',
        },
      ],
    },
    // 旧路径重定向
    {
      source: '/articles/:slug',
      destination: '/weekly/:slug',
      permanent: true,
    },
    {
      source: '/blog/:slug',
      destination: '/weekly/:slug',
      permanent: true,
    },
  ];
},
```

#### **第2步：Canonical URL配置**
```typescript
// frontend/src/app/weekly/[slug]/page.tsx
export async function generateMetadata({ params }: ArticlePageProps) {
  const article = await getArticleBySlug(params.slug);
  
  return {
    title: article.seo?.title || article.title,
    description: article.seo?.description || article.excerpt,
    alternates: {
      canonical: `https://aibianx.com/weekly/${params.slug}`,
    },
    openGraph: {
      url: `https://aibianx.com/weekly/${params.slug}`,
      // ... 其他配置
    },
  };
}
```

---

## 🎯 部署检查清单

### ✅ **基础设施检查**
```markdown
- [ ] Supabase PostgreSQL数据库运行正常
- [ ] Railway Strapi服务运行正常
- [ ] Vercel前端服务运行正常
- [ ] 阿里云OSS文件存储配置完成
- [ ] Cloudflare CDN加速启用
- [ ] 所有服务健康检查通过
```

### ✅ **域名和SSL检查**
```markdown
- [ ] 主域名aibianx.com正常访问
- [ ] API域名api.aibianx.com正常访问
- [ ] 资源域名assets.aibianx.com正常访问
- [ ] SSL证书有效且评级为A+
- [ ] HTTPS重定向正常工作
- [ ] WWW重定向到主域名正常
```

### ✅ **功能检查**
```markdown
- [ ] 文章列表页面正常显示
- [ ] 文章详情页面正常显示
- [ ] 搜索功能正常工作
- [ ] 分页功能正常工作
- [ ] 图片上传和显示正常
- [ ] Strapi管理界面可正常访问
```

### ✅ **性能检查**
```markdown
- [ ] PageSpeed Insights得分90+
- [ ] Core Web Vitals全部通过
- [ ] 图片WebP格式加载
- [ ] Gzip/Brotli压缩启用
- [ ] 缓存策略配置正确
- [ ] CDN缓存命中率>90%
```

### ✅ **安全检查**
```markdown
- [ ] 所有HTTP请求重定向到HTTPS
- [ ] 安全头部配置正确
- [ ] CORS配置安全
- [ ] API访问限流启用
- [ ] 敏感信息环境变量保护
- [ ] 数据库访问权限正确
```

### ✅ **监控检查**
```markdown
- [ ] Sentry错误监控正常
- [ ] Google Analytics跟踪正常
- [ ] 服务器日志正常输出
- [ ] 数据库监控正常
- [ ] 告警通知配置完成
- [ ] 备份任务定期执行
```

---

## 🚀 上线后维护

### 📊 **日常监控任务**
```bash
# 每日检查清单
1. 检查服务器状态和响应时间
2. 查看错误日志和异常报告
3. 监控数据库性能和连接数
4. 检查CDN缓存命中率
5. 查看网站访问量和搜索排名

# 每周检查清单
1. 检查服务器资源使用率
2. 更新安全补丁
3. 检查备份文件完整性
4. 分析网站性能报告
5. 更新内容和优化SEO

# 每月检查清单
1. 轮换安全密钥
2. 检查服务器账单和使用量
3. 更新依赖包和插件
4. 性能优化和代码重构
5. 制定下月内容计划
```

### 🔧 **紧急故障处理**
```bash
# 故障响应流程
1. 立即确认故障范围和影响
2. 查看监控系统和错误日志
3. 检查服务器状态和资源使用
4. 实施快速修复或回滚
5. 通知用户和利益相关者
6. 详细记录故障原因和解决方案
7. 制定预防措施避免再次发生

# 常见故障及解决方案
数据库连接超时：检查连接池配置，增加实例资源
API响应缓慢：检查查询优化，启用缓存
文件上传失败：检查OSS配置和权限
页面加载慢：检查CDN缓存，优化图片大小
SSL证书过期：更新证书，检查自动续期配置
```

### 📈 **扩容策略**
```bash
# 当达到以下指标时考虑扩容：
- 数据库CPU使用率 > 80%
- 内存使用率 > 85%
- 磁盘使用率 > 90%
- 响应时间 > 2秒
- 错误率 > 1%

# 扩容方案：
1. 垂直扩容：升级服务器配置
2. 水平扩容：增加服务器实例
3. 数据库优化：读写分离、分库分表
4. 缓存策略：Redis集群、CDN优化
5. 负载均衡：多实例负载分发
```

**🎉 通过这套完整的部署方案，您的AI变现之路项目将拥有企业级的稳定性、安全性和可扩展性！** 