# ===================================
# AI变现之路 - 一键部署配置文件
# ===================================
# 🎯 这是唯一需要配置的文件
# 📝 配置完成后运行: ./scripts.sh deploy config
#

# �� 部署配置 (必填)
# =====================================
# 部署模式: dev | production
DEPLOY_MODE=dev

# 域名配置 (生产环境必填)
DOMAIN=localhost                    # 开发环境用localhost，生产环境改为你的域名
MAIL_DOMAIN=localhost              # 邮件域名，生产环境改为mail.yourdomain.com

# 📦 仓库配置 (一键部署使用)
# =====================================
REPO_ORG=lyfe2025                  # GitHub组织/用户名
PROJECT_NAME=aibianx               # 项目名称
REPO_URL=https://github.com/${REPO_ORG}/${PROJECT_NAME}.git  # 完整仓库地址 (main分支)

# 🔐 数据库配置 (必填)
# =====================================
# 数据库配置 (开发和生产环境自动切换)
DB_NAME=aibianx_dev                      # 数据库名称
DB_USER=aibianx_dev                 # 数据库用户名
DB_PASSWORD=             # 数据库密码
DB_ADMIN_PASSWORD=postgres_admin_2024 # PostgreSQL管理员密码

# Strapi后台管理员 (首次访问时创建)
# 用户名: admin
# 邮箱: admin@aibianx.com  
# 密码: 在浏览器首次访问后台时设置

# 📧 邮件系统配置 (BillionMail已移除)
# =====================================
# 邮件服务将由自建系统提供
# BILLIONMAIL_USERNAME=admin                  # 已移除
# BILLIONMAIL_PASSWORD=billionmail2024        # 已移除
# BILLIONMAIL_DB_NAME=billionmail             # 已移除
# BILLIONMAIL_DB_USER=billionmail             # 已移除
# BILLIONMAIL_DB_PASSWORD=billionmail_db_2024 # 已移除
# BILLIONMAIL_HOSTNAME=localhost              # 已移除
# BILLIONMAIL_TZ=Asia/Shanghai                # 已移除
# BILLIONMAIL_REDIS_PASSWORD=                 # 已移除
# BILLIONMAIL_SAFEPATH=billion                # 已移除
# BILLIONMAIL_HTTP_PORT=8080                  # 已移除
# BILLIONMAIL_HTTPS_PORT=8443                 # 已移除
# BILLIONMAIL_SMTP_PORT=25                    # 已移除
# BILLIONMAIL_SMTPS_PORT=465                  # 已移除
# BILLIONMAIL_SUBMISSION_PORT=587             # 已移除
# BILLIONMAIL_IMAP_PORT=143                   # 已移除
# BILLIONMAIL_IMAPS_PORT=993                  # 已移除
# BILLIONMAIL_POP_PORT=110                    # 已移除
# BILLIONMAIL_POPS_PORT=995                   # 已移除
# BILLIONMAIL_REDIS_PORT=26379                # 已移除
# BILLIONMAIL_SQL_PORT=25432                  # 已移除
# BILLIONMAIL_IPV4_NETWORK=172.66.1           # 已移除
# BILLIONMAIL_FAIL2BAN_INIT=y                 # 已移除
# BILLIONMAIL_IP_WHITELIST_ENABLE=false       # 已移除

# 🗄️ 备份恢复配置 (必填)
# =====================================
# 备份版本 (格式: YYYYMMDD_HHMMSS 或 latest 自动选择最新)
# 📦 注意: 系统从 解压后的目录 进行恢复，不是压缩包
# 📂 完整备份: backups/complete_backup_YYYYMMDD_HHMMSS/ (推荐，包含数据库+重要文件)
# 🗄️ 数据库备份: backups/db_backup_YYYYMMDD_HHMMSS/ (仅数据库)
# 📂 旧版备份: backups/strapi_backup_YYYYMMDD_HHMMSS/ (兼容旧版)
# 💡 如果只有压缩包，请先解压: tar -xzf backups/*_backup_*.tar.gz -C backups/
BACKUP_VERSION=latest              # 自动使用最新备份版本

# 📋 备份内容详细说明:
# =====================================
# 🗄️ 数据库备份内容:
#   - Strapi主业务数据库 (aibianx_dev) - 文章、用户、分类、标签、SEO等业务数据
#   - 邮件数据库 (已移除BillionMail)
# 📁 重要文件备份内容:
#   - 配置文件: deploy.conf, .env, env_init, package.json
#   - 上传文件: 用户上传的图片、文档、媒体文件
#   - 构建文件: 前端构建产物 (如果存在)
# ⚠️ 自动重建内容 (无需备份):
#   - Redis缓存: 会话数据、临时缓存 (服务启动时自动重建)
#   - MeiliSearch搜索索引: 全文搜索数据 (首次访问时自动同步)
#   - Node.js依赖: node_modules (npm install重新安装)
#   - Docker镜像: 容器镜像 (Docker自动拉取)

# 🚀 自动化开关 (推荐保持默认)  
# =====================================
AUTO_RESTORE_BACKUP=true          # 自动从备份恢复数据
AUTO_DEPLOY_SEARCH=true            # 自动部署搜索引擎  
AUTO_DEPLOY_EMAIL=false            # 已移除BillionMail邮件系统

# 🌐 端口配置 (可选，使用默认值)
# =====================================
FRONTEND_PORT=80                      # 前端端口
BACKEND_PORT=1337                     # 后端端口  
MEILISEARCH_PORT=7700                 # 搜索引擎端口
# BILLIONMAIL_PORT=8080               # 已移除BillionMail

# 📧 邮件配置 (可选)
# =====================================
# 邮件服务将由自建系统提供（BillionMail已移除）
# 后续将集成自建SMTP或第三方邮件服务
