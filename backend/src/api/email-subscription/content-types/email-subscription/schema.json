{
  "kind": "collectionType",
  "collectionName": "email_subscriptions",
  "info": {
    "singularName": "email-subscription",
    "pluralName": "email-subscriptions",
    "displayName": "邮件订阅",
    "description": "邮件列表订阅管理 - 管理用户邮件列表订阅状态和偏好"
  },
  "options": {
    "draftAndPublish": false
  },
  "attributes": {
    "email": {
      "type": "email",
      "required": true,
      "unique": true,
      "description": "订阅邮箱地址"
    },
    "user": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "plugin::users-permissions.user",
      "description": "关联用户（可选，游客也可以订阅）"
    },
    "source": {
      "type": "enumeration",
      "enum": ["homepage", "sidebar", "footer", "popup", "api"],
      "required": true,
      "description": "订阅来源页面"
    },
    "tags": {
      "type": "json",
      "description": "订阅标签列表"
    },
    "emailSubscriberId": {
      "type": "string",
      "description": "本地邮件系统中的订阅者ID"
    },
    "emailListIds": {
      "type": "json",
      "description": "已订阅的邮件列表ID集合"
    },
    "status": {
      "type": "enumeration",
      "enum": ["active", "unsubscribed", "bounced"],
      "default": "active",
      "description": "订阅状态：激活/取消订阅/退信"
    },
    "preferences": {
      "type": "json",
      "description": "邮件偏好设置（频率、类型等）"
    },
    "subscribedAt": {
      "type": "datetime",
      "description": "首次订阅时间"
    },
    "lastEmailSent": {
      "type": "datetime",
      "description": "最后发送邮件时间"
    }
  }
}