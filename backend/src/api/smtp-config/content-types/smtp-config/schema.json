{
  "kind": "collectionType",
  "collectionName": "smtp_configs",
  "info": {
    "singularName": "smtp-config",
    "pluralName": "smtp-configs",
    "displayName": "SMTP配置",
    "description": "SMTP邮件服务器配置管理 - 支持多个SMTP提供商、负载均衡和故障转移"
  },
  "options": {
    "draftAndPublish": false,
    "comment": "SMTP邮件服务器配置管理 - 支持多个SMTP提供商、负载均衡和故障转移"
  },
  "pluginOptions": {},
  "attributes": {
    "name": {
      "type": "string",
      "required": true,
      "unique": true,
      "maxLength": 100,
      "description": "配置名称 - 用于标识SMTP配置的友好名称（如：阿里云邮件、腾讯企业邮箱）"
    },
    "provider": {
      "type": "enumeration",
      "enum": ["aliyun", "tencent", "qq", "netease163", "gmail", "outlook", "sendgrid", "mailgun", "custom"],
      "required": true,
      "description": "邮件服务提供商 - 预设的邮件服务提供商或自定义配置"
    },
    "host": {
      "type": "string",
      "required": true,
      "maxLength": 255,
      "description": "SMTP服务器地址 - 邮件服务器的主机名或IP地址"
    },
    "port": {
      "type": "integer",
      "required": true,
      "min": 1,
      "max": 65535,
      "default": 587,
      "description": "SMTP端口号 - 常用端口：25(不加密), 587(STARTTLS), 465(SSL/TLS)"
    },
    "secure": {
      "type": "boolean",
      "default": true,
      "required": true,
      "description": "安全连接 - 是否使用SSL/TLS加密连接"
    },
    "username": {
      "type": "string",
      "required": true,
      "maxLength": 255,
      "description": "用户名 - SMTP服务器认证用户名（通常是邮箱地址）"
    },
    "password": {
      "type": "password",
      "required": true,
      "description": "密码 - SMTP服务器认证密码或授权码"
    },
    "fromEmail": {
      "type": "email",
      "required": true,
      "description": "发件人邮箱 - 默认的发件人邮箱地址"
    },
    "fromName": {
      "type": "string",
      "maxLength": 100,
      "description": "发件人名称 - 默认的发件人显示名称"
    },
    "isActive": {
      "type": "boolean",
      "default": true,
      "required": true,
      "description": "激活状态 - 是否启用该SMTP配置"
    },
    "priority": {
      "type": "integer",
      "default": 1,
      "min": 1,
      "max": 10,
      "description": "优先级 - 数字越小优先级越高，用于负载均衡和故障转移"
    },
    "dailyLimit": {
      "type": "integer",
      "default": 1000,
      "min": 0,
      "description": "每日发送限制 - 该SMTP配置每天最多发送邮件数量（0表示无限制）"
    },
    "dailySent": {
      "type": "integer",
      "default": 0,
      "min": 0,
      "description": "今日已发送 - 今天已通过该SMTP配置发送的邮件数量（自动计算）"
    },
    "monthlyLimit": {
      "type": "integer",
      "default": 30000,
      "min": 0,
      "description": "每月发送限制 - 该SMTP配置每月最多发送邮件数量（0表示无限制）"
    },
    "monthlySent": {
      "type": "integer",
      "default": 0,
      "min": 0,
      "description": "本月已发送 - 本月已通过该SMTP配置发送的邮件数量（自动计算）"
    },
    "lastUsed": {
      "type": "datetime",
      "description": "最后使用时间 - 该SMTP配置最后一次发送邮件的时间"
    },
    "healthStatus": {
      "type": "enumeration",
      "enum": ["healthy", "warning", "error", "unknown"],
      "default": "unknown",
      "required": true,
      "description": "健康状态 - SMTP服务器的连接健康状态"
    },
    "lastHealthCheck": {
      "type": "datetime",
      "description": "最后健康检查时间 - 最后一次执行健康检查的时间"
    },
    "healthCheckInterval": {
      "type": "integer",
      "default": 300,
      "min": 60,
      "max": 3600,
      "description": "健康检查间隔 - 自动健康检查的间隔时间（秒）"
    },
    "errorCount": {
      "type": "integer",
      "default": 0,
      "min": 0,
      "description": "错误次数 - 连续发送失败的次数（用于故障转移判断）"
    },
    "maxErrorCount": {
      "type": "integer",
      "default": 3,
      "min": 1,
      "max": 10,
      "description": "最大错误次数 - 连续失败超过此次数将暂停使用该配置"
    },
    "connectionTimeout": {
      "type": "integer",
      "default": 30000,
      "min": 5000,
      "max": 120000,
      "description": "连接超时 - SMTP连接超时时间（毫秒）"
    },
    "poolSize": {
      "type": "integer",
      "default": 5,
      "min": 1,
      "max": 20,
      "description": "连接池大小 - 同时保持的SMTP连接数量"
    },
    "rateLimitPerHour": {
      "type": "integer",
      "default": 100,
      "min": 1,
      "description": "每小时限制 - 每小时最多发送邮件数量"
    },
    "allowedDomains": {
      "type": "json",
      "description": "允许的域名 - JSON数组，指定允许通过此SMTP发送的域名列表（空表示不限制）"
    },
    "blockedDomains": {
      "type": "json",
      "description": "禁止的域名 - JSON数组，指定禁止通过此SMTP发送的域名列表"
    },
    "customHeaders": {
      "type": "json",
      "description": "自定义邮件头 - JSON对象，为通过此SMTP发送的邮件添加自定义头信息"
    },
    "testRecipient": {
      "type": "email",
      "description": "测试收件人 - 用于SMTP配置健康检查的测试邮箱地址"
    },
    "notes": {
      "type": "text",
      "description": "备注信息 - 管理员对该SMTP配置的备注或使用说明"
    },
    "tags": {
      "type": "json",
      "description": "标签 - JSON数组，用于对SMTP配置进行分类管理"
    },
    "region": {
      "type": "string",
      "maxLength": 50,
      "description": "地区 - SMTP服务器所在地区（如：华东、华北、美国东部等）"
    },
    "cost": {
      "type": "decimal",
      "description": "成本 - 每封邮件的成本（用于成本统计和优化）"
    }
  }
}