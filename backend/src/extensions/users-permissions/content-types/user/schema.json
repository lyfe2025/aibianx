{
  "kind": "collectionType",
  "collectionName": "up_users",
  "info": {
    "name": "user",
    "description": "扩展的用户表 - 支持多认证方式、会员系统、邀请返佣、邮件营销集成",
    "singularName": "user",
    "pluralName": "users",
    "displayName": "用户"
  },
  "options": {
    "draftAndPublish": false,
    "timestamps": true
  },
  "attributes": {
    "username": {
      "type": "string",
      "minLength": 3,
      "unique": true,
      "configurable": false,
      "required": true
    },
    "email": {
      "type": "email",
      "minLength": 6,
      "configurable": false,
      "required": true,
      "unique": true
    },
    "provider": {
      "type": "string",
      "configurable": false
    },
    "password": {
      "type": "password",
      "minLength": 6,
      "configurable": false,
      "private": true,
      "searchable": false
    },
    "resetPasswordToken": {
      "type": "string",
      "configurable": false,
      "private": true,
      "searchable": false
    },
    "confirmationToken": {
      "type": "string",
      "configurable": false,
      "private": true,
      "searchable": false
    },
    "confirmed": {
      "type": "boolean",
      "default": false,
      "configurable": false
    },
    "blocked": {
      "type": "boolean",
      "default": false,
      "configurable": false
    },
    "role": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "plugin::users-permissions.role",
      "inversedBy": "users",
      "configurable": false
    },
    
    "nickname": {
      "type": "string",
      "maxLength": 50,
      "description": "用户昵称/显示名称"
    },
    "avatar": {
      "type": "media",
      "multiple": false,
      "required": false,
      "allowedTypes": ["images"],
      "description": "用户头像"
    },
    "phone": {
      "type": "string",
      "maxLength": 20,
      "description": "用户手机号"
    },
    "birthday": {
      "type": "date",
      "description": "用户生日"
    },
    "gender": {
      "type": "enumeration",
      "enum": ["male", "female", "other"],
      "description": "用户性别"
    },
    
    "providerAccountId": {
      "type": "string",
      "description": "第三方账号ID（OAuth登录时的外部账号标识）"
    },
    "isEmailVerified": {
      "type": "boolean",
      "default": false,
      "description": "邮箱验证状态"
    },
    "githubId": {
      "type": "string",
      "description": "GitHub用户ID"
    },
    "githubUsername": {
      "type": "string",
      "description": "GitHub用户名"
    },
    "googleId": {
      "type": "string",
      "description": "Google用户ID"
    },
    "hasPassword": {
      "type": "boolean",
      "default": true,
      "description": "是否设置了登录密码（OAuth用户可能没有密码）"
    },
    "connectedProviders": {
      "type": "json",
      "description": "已绑定的登录方式列表 ['local', 'github', 'google']"
    },
    
    "membershipLevel": {
      "type": "enumeration",
      "enum": ["free", "basic", "premium", "vip"],
      "default": "free",
      "description": "会员等级"
    },
    "membershipExpiry": {
      "type": "datetime",
      "description": "会员到期时间"
    },
    "membershipAutoRenew": {
      "type": "boolean",
      "default": false,
      "description": "是否开启会员自动续费"
    },
    
    "inviteCode": {
      "type": "string",
      "unique": true,
      "maxLength": 20,
      "description": "用户专属邀请码，用于邀请他人注册"
    },
    "invitedBy": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "plugin::users-permissions.user",
      "description": "邀请该用户注册的用户"
    },
    "inviteCount": {
      "type": "integer",
      "default": 0,
      "description": "已邀请人数统计"
    },
    "totalCommission": {
      "type": "decimal",
      "default": 0,
      "description": "累计返佣金额"
    },
    
    "billionmailSubscribed": {
      "type": "boolean",
      "default": false,
      "description": "BillionMail订阅状态"
    },
    "billionmailSubscriberId": {
      "type": "string",
      "description": "BillionMail系统中的订阅者ID"
    },
    "billionmailListIds": {
      "type": "json",
      "description": "订阅的邮件列表ID集合"
    },
    
    "lastLoginAt": {
      "type": "datetime",
      "description": "最后登录时间"
    },
    "loginCount": {
      "type": "integer",
      "default": 0,
      "description": "累计登录次数"
    }
  }
}