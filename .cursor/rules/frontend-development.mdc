# å‰ç«¯å¼€å‘è§„èŒƒ (Frontend Development Rules)

## ğŸ—ï¸ **å‰ç«¯ç»„ä»¶å¼€å‘è§„èŒƒï¼ˆè¯¦ç»†ï¼‰**

### **ğŸ”§ ç»„ä»¶æ¶æ„åŸåˆ™**
- **åŸå­è®¾è®¡**: atoms â†’ molecules â†’ organisms â†’ templates
- **ç»„åˆä¼˜äºç»§æ‰¿**: ä½¿ç”¨ç»„åˆæ¨¡å¼æ„å»ºå¤æ‚ç»„ä»¶
- **å•ä¸€èŒè´£**: æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½
- **æ•°æ®æµå‘ä¸‹**: propså‘ä¸‹ä¼ é€’ï¼Œeventså‘ä¸Šå†’æ³¡

### **ğŸ“ ç»„ä»¶å‘½åå’Œæ–‡ä»¶ç»“æ„æ ‡å‡†**
```typescript
// âœ… æ­£ç¡®çš„ç»„ä»¶æ–‡ä»¶ç»“æ„
src/components/
â”œâ”€â”€ ui/                    # åŸå­ç»„ä»¶
â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”œâ”€â”€ Button.tsx     # ä¸»ç»„ä»¶æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ Button.css     # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ Button.test.tsx # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ index.ts       # å¯¼å‡ºæ–‡ä»¶
â”œâ”€â”€ molecules/             # åˆ†å­ç»„ä»¶
â”‚   â”œâ”€â”€ SearchBar/
â”‚   â”œâ”€â”€ ArticleCard/
â”œâ”€â”€ organisms/             # æœ‰æœºç»„ä»¶
â”‚   â”œâ”€â”€ Header/
â”‚   â”œâ”€â”€ ArticleList/

// âœ… æ ‡å‡†ç»„ä»¶å¯¼å‡ºæ ¼å¼
export { Button } from './Button'
export type { ButtonProps } from './Button'
```

### **ğŸ¯ ç»„ä»¶Propsè®¾è®¡è§„èŒƒ**
```typescript
// âœ… æ ‡å‡†Propsæ¥å£è®¾è®¡
interface ButtonProps {
  // åŸºç¡€å±æ€§
  children: React.ReactNode
  className?: string
  
  // åŠŸèƒ½å±æ€§ï¼ˆæ˜ç¡®ç±»å‹ï¼‰
  variant?: 'primary' | 'secondary' | 'ghost'
  size?: 'sm' | 'md' | 'lg'
  disabled?: boolean
  loading?: boolean
  
  // äº‹ä»¶å¤„ç†ï¼ˆä½¿ç”¨æ ‡å‡†å‘½åï¼‰
  onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void
  onFocus?: (event: React.FocusEvent<HTMLButtonElement>) => void
  
  // HTMLå±æ€§ï¼ˆæœ‰é€‰æ‹©åœ°æš´éœ²ï¼‰
  type?: 'button' | 'submit' | 'reset'
  'aria-label'?: string
  'data-testid'?: string
}

// âŒ é¿å…çš„Propsè®¾è®¡
interface BadButtonProps {
  color: string           // å¤ªçµæ´»ï¼Œåº”è¯¥ä½¿ç”¨æšä¸¾
  style: CSSProperties    // ç ´åç»„ä»¶å°è£…
  customClass: string     // å‘½åä¸æ ‡å‡†
}
```

### **ğŸ¨ æ ·å¼ç®¡ç†æ ‡å‡†**
```css
/* âœ… ç»„ä»¶æ ·å¼æ ‡å‡†æ ¼å¼ */
.button {
  /* 1. CSSå˜é‡ä½¿ç”¨ */
  color: var(--color-text-primary);
  background: var(--color-bg-primary);
  
  /* 2. å“åº”å¼è®¾è®¡ */
  padding: var(--spacing-sm) var(--spacing-md);
  
  /* 3. çŠ¶æ€ç®¡ç† */
  transition: all var(--transition-normal);
  
  /* 4. äº¤äº’çŠ¶æ€ */
  &:hover {
    background: var(--color-bg-primary-hover);
    transform: translateY(-1px);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  
  /* 5. å˜ä½“æ ·å¼ */
  &.button--primary {
    background: var(--gradient-primary);
  }
  
  &.button--loading {
    position: relative;
    color: transparent;
    
    &::after {
      content: '';
      position: absolute;
      /* åŠ è½½åŠ¨ç”»æ ·å¼ */
    }
  }
}
```

### **ğŸ”— çŠ¶æ€ç®¡ç†å’ŒAPIé›†æˆ**
```typescript
// âœ… è‡ªå®šä¹‰Hookæ ‡å‡†æ ¼å¼
export const useArticles = (params?: ArticleParams) => {
  const [data, setData] = useState<Article[]>([])
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState<string | null>(null)
  
  const fetchArticles = useCallback(async () => {
    try {
      setLoading(true)
      setError(null)
      const articles = await strapiClient.getArticles(params)
      setData(articles)
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Unknown error')
    } finally {
      setLoading(false)
    }
  }, [params])
  
  useEffect(() => {
    fetchArticles()
  }, [fetchArticles])
  
  return { data, loading, error, refetch: fetchArticles }
}

// âœ… Zustand Storeæ ‡å‡†æ ¼å¼
interface UserStore {
  // çŠ¶æ€å®šä¹‰
  user: User | null
  isAuthenticated: boolean
  loading: boolean
  
  // åŠ¨ä½œå®šä¹‰
  login: (credentials: LoginCredentials) => Promise<void>
  logout: () => void
  updateProfile: (profile: Partial<User>) => Promise<void>
}

export const useUserStore = create<UserStore>()(
  persist(
    (set, get) => ({
      user: null,
      isAuthenticated: false,
      loading: false,
      
      login: async (credentials) => {
        set({ loading: true })
        try {
          const user = await authService.login(credentials)
          set({ user, isAuthenticated: true, loading: false })
        } catch (error) {
          set({ loading: false })
          throw error
        }
      },
      
      logout: () => {
        set({ user: null, isAuthenticated: false })
      },
    }),
    { name: 'user-store' }
  )
)
```

### **ğŸ“± å“åº”å¼è®¾è®¡æ ‡å‡†**
```typescript
// âœ… å“åº”å¼ç»„ä»¶è®¾è®¡
const ArticleCard: React.FC<ArticleCardProps> = ({ article }) => {
  return (
    <div className="article-card">
      {/* ç§»åŠ¨ç«¯ä¼˜å…ˆè®¾è®¡ */}
      <div className="article-card__image">
        <Image
          src={article.featuredImage}
          alt={article.title}
          fill
          sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
          className="object-cover"
        />
      </div>
      
      <div className="article-card__content">
        <h3 className="article-card__title">{article.title}</h3>
        <p className="article-card__excerpt">{article.excerpt}</p>
        
        {/* æ¡ä»¶æ¸²æŸ“ */}
        {article.featured && (
          <Badge variant="featured">ç½®é¡¶</Badge>
        )}
      </div>
    </div>
  )
}

// âœ… å¯¹åº”çš„å“åº”å¼æ ·å¼
.article-card {
  /* ç§»åŠ¨ç«¯åŸºç¡€æ ·å¼ */
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  
  /* å¹³æ¿ç«¯é€‚é… */
  @media (min-width: 768px) {
    flex-direction: row;
    gap: var(--spacing-md);
  }
  
  /* æ¡Œé¢ç«¯é€‚é… */
  @media (min-width: 1024px) {
    gap: var(--spacing-lg);
  }
}
```

### **ğŸ§ª ç»„ä»¶æµ‹è¯•æ ‡å‡†**
```typescript
// âœ… ç»„ä»¶æµ‹è¯•æ ‡å‡†æ ¼å¼
describe('Button Component', () => {
  it('renders with correct text', () => {
    render(<Button>Click me</Button>)
    expect(screen.getByRole('button', { name: /click me/i })).toBeInTheDocument()
  })
  
  it('handles click events', () => {
    const handleClick = jest.fn()
    render(<Button onClick={handleClick}>Click me</Button>)
    
    fireEvent.click(screen.getByRole('button'))
    expect(handleClick).toHaveBeenCalledTimes(1)
  })
  
  it('shows loading state', () => {
    render(<Button loading>Loading</Button>)
    expect(screen.getByRole('button')).toHaveAttribute('aria-busy', 'true')
  })
  
  it('respects disabled state', () => {
    const handleClick = jest.fn()
    render(<Button disabled onClick={handleClick}>Disabled</Button>)
    
    const button = screen.getByRole('button')
    expect(button).toBeDisabled()
    
    fireEvent.click(button)
    expect(handleClick).not.toHaveBeenCalled()
  })
})
```

### **âš›ï¸ React Hooksä½¿ç”¨è§„èŒƒ**
```typescript
// âœ… è‡ªå®šä¹‰Hookæœ€ä½³å®è·µ
export const useDebounce = <T>(value: T, delay: number): T => {
  const [debouncedValue, setDebouncedValue] = useState<T>(value)

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value)
    }, delay)

    return () => {
      clearTimeout(handler)
    }
  }, [value, delay])

  return debouncedValue
}

// âœ… useEffectä¾èµ–æ•°ç»„æœ€ä½³å®è·µ
const ComponentWithAPI: React.FC<Props> = ({ userId }) => {
  const [user, setUser] = useState<User | null>(null)
  
  // ä½¿ç”¨useCallbackåŒ…è£…å‡½æ•°ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
  const fetchUser = useCallback(async () => {
    if (!userId) return
    
    try {
      const userData = await api.getUser(userId)
      setUser(userData)
    } catch (error) {
      console.error('Failed to fetch user:', error)
    }
  }, [userId]) // æ­£ç¡®çš„ä¾èµ–æ•°ç»„
  
  useEffect(() => {
    fetchUser()
  }, [fetchUser])
  
  return user ? <UserProfile user={user} /> : <Loading />
}
```

### **ğŸ”„ çŠ¶æ€æ›´æ–°å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†**
```typescript
// âœ… çŠ¶æ€æ›´æ–°æœ€ä½³å®è·µ
const TodoList: React.FC = () => {
  const [todos, setTodos] = useState<Todo[]>([])
  
  // ä½¿ç”¨å‡½æ•°å¼æ›´æ–°é¿å…çŠ¶æ€ç«äº‰
  const addTodo = useCallback((text: string) => {
    const newTodo: Todo = {
      id: Date.now(),
      text,
      completed: false
    }
    
    setTodos(prevTodos => [...prevTodos, newTodo])
  }, [])
  
  // æ‰¹é‡çŠ¶æ€æ›´æ–°
  const toggleTodo = useCallback((id: number) => {
    setTodos(prevTodos =>
      prevTodos.map(todo =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo
      )
    )
  }, [])
  
  return (
    <div>
      {todos.map(todo => (
        <TodoItem
          key={todo.id}
          todo={todo}
          onToggle={toggleTodo}
        />
      ))}
    </div>
  )
}
```

### **ğŸ“¦ ç»„ä»¶ä¼˜åŒ–å’Œæ€§èƒ½**
```typescript
// âœ… ç»„ä»¶æ€§èƒ½ä¼˜åŒ–
const ExpensiveComponent: React.FC<Props> = React.memo(({ data, onSelect }) => {
  // ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ
  const processedData = useMemo(() => {
    return data.map(item => ({
      ...item,
      displayName: `${item.firstName} ${item.lastName}`
    }))
  }, [data])
  
  // ä½¿ç”¨useCallbackç¼“å­˜äº‹ä»¶å¤„ç†å‡½æ•°
  const handleItemClick = useCallback((item: Item) => {
    onSelect(item.id)
  }, [onSelect])
  
  return (
    <div>
      {processedData.map(item => (
        <ItemComponent
          key={item.id}
          item={item}
          onClick={handleItemClick}
        />
      ))}
    </div>
  )
}, (prevProps, nextProps) => {
  // è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°
  return prevProps.data === nextProps.data && prevProps.onSelect === nextProps.onSelect
})
```

### **ğŸ“‹ å‰ç«¯å¼€å‘æ£€æŸ¥æ¸…å•**
- [ ] ç»„ä»¶æ–‡ä»¶ç»“æ„ç¬¦åˆåŸå­è®¾è®¡åŸåˆ™
- [ ] Propsæ¥å£å®šä¹‰å®Œæ•´ä¸”ç±»å‹å®‰å…¨
- [ ] æ ·å¼ä½¿ç”¨CSSå˜é‡è€Œéç¡¬ç¼–ç 
- [ ] å“åº”å¼è®¾è®¡è¦†ç›–æ‰€æœ‰æ–­ç‚¹
- [ ] é”™è¯¯çŠ¶æ€å’ŒåŠ è½½çŠ¶æ€å¤„ç†å®Œæ•´
- [ ] ç»„ä»¶å…·æœ‰é€‚å½“çš„æµ‹è¯•è¦†ç›–
- [ ] æ€§èƒ½ä¼˜åŒ–æªæ–½åˆ°ä½ (memo, callback, useMemo)
- [ ] å¯è®¿é—®æ€§è¦æ±‚æ»¡è¶³ (aria-label, é”®ç›˜å¯¼èˆª)
- [ ] ä»£ç æ³¨é‡Šæ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤